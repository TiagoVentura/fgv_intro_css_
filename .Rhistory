response <- GET("https://api.fogocruzado.org.br/api/v1/cities",
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
output
response <- GET("https://api.fogocruzado.org.br/api/v1/occurrences?estado_id[]=24&estado_id[]=25&cidade_id[]=5276&cidade_id[]=4506",
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
output
httr::content(response, as="text", encoding = "UTF-8")
content(response)
api="https://api.fogocruzado.org.br/api/v1/occurrences?estado_id[]=24&estado_id[]=25&cidade_id[]=5276&cidade_id[]=4506"
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
response
content(response)
api="https://api.fogocruzado.org.br/api/v1/occurrences?data_ocorrencia[gt]=2018-09-09&data_ocorrencia[lt]=2019-01-01"
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
content(response)
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
output
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
# Qual o resultado?
response
content(response)
# Passo 1. Crie a Url
base_url <- "https://api.fogocruzado.org.br/api/v1"
occurences <- "/occurrences"
api <- paste0(base_url, occurences)
print(api)
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
# Qual o resultado?
response
content(response)
content(response, as="text")
# Passo 1. Crie a Url
base_url <- "https://api.fogocruzado.org.br/api/v1"
occurences <- "/cities"
api <- paste0(base_url, occurences)
print(api)
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
# Qual o resultado?
response
# Converter para um json
json_fogo_cruzado <- content(response, as="text", encoding = "UTF-8")
json_fogo_cruzado
# Limpando Jsons
output <- fromJSON(json_fogo_cruzado) %>%
tibble::as_tibble()
glimpse(output)
output
query_list <- list(presen_agen_segur_ocorrencia="1",
uf_estado="RJ",
data_ocorrencia="2019-01-01")
response <- GET(api,
query_list=query_list
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
response <- GET(api,
query_list=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
content(response)
c <-POST("https://api.fogocruzado.org.br/api/v1/auth/refresh")
c
content(c)$
# Passo 1. Crie a Url
base_url <- "https://api.fogocruzado.org.br/api/v1"
content(c)
get_jwt <- httr::POST("https://api.fogocruzado.org.br/api/v1/auth/refresh",
query = list(email = "venturat@umd.edu", password = "ptds42420678"))
# Pegar a senha
token <- httr::content(get_jwt)$access_token
token
library(httr)
library(tidyverse)
# Acesse a API
endpoint = "https://dog.ceo/api/breeds/image/random"
acesso = GET(endpoint)
# O que é este arquivo?
class(acesso)
# Acesso a mensagem de resposta
link_image <- content(acesso)$message
link_image
# Pacotes para acessar APIs
library(httr)
library(jsonlite)
library(tidyverse)
get_jwt <- httr::POST("https://api.fogocruzado.org.br/api/v1/auth/login",
query = list(email = "venturat@umd.edu", password = "ptds42420678"))
# Pegar a senha
token <- httr::content(get_jwt)$access_token
token
# Passo 1. Crie a Url
base_url <- "https://api.fogocruzado.org.br/api/v1"
occurences <- "/cities"
api <- paste0(base_url, occurences)
print(api)
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
# Qual o resultado?
response
# Converter para um json
json_fogo_cruzado <- content(response, as="text", encoding = "UTF-8")
# Limpando Jsons
output <- fromJSON(json_fogo_cruzado) %>%
tibble::as_tibble()
output
query_list <- list(presen_agen_segur_ocorrencia="1",
uf_estado="RJ",
data_ocorrencia="2019-01-01")
response <- GET(api,
query_list=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
content(response)
query_list <- list(data_ocorrencia="2019-01-01")
response <- GET(api,
query_list=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
output
response
query_list <- list(data_ocorrencia="2019-01-01")
# url basica de ocorrencias.
base_url <- "https://api.fogocruzado.org.br/api/v1"
# url basica de ocorrencias.
base_url <- "https://api.fogocruzado.org.br/api/v1"
occurences <- "/occurences"
occurences <- "/occurrences"
api <- paste0(base_url, occurences)
print(api)
# Cria Query
query_list <- list(data_ocorrencia="2019-01-01")
# GET
response <- GET(api,
query_list=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
response
# Cria Query
query_list <- list(data_ocorrencia="2019-01-01")
# GET
response <- GET(api,
query_list=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
response
?GET
# GET
response <- GET(api,
query=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
response
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
output
library(ggmap)
install.packages("ggmap")
library(ggmap)
library(RColorBrewer)
register_google('AIzaSyDG-v66MvW5OjvlY8QlTAewh2YyZNt8iDs') # insert your API key here
ggmap(get_googlemap("rio de janeiro", zoom = 11, maptype = "roadmap", scale=2)) +
geom_point(data = output,
aes(x = longitude_ocorrencia,
y = latitude_ocorrencia),
color="tomato2", alpha=.8, size = 0.3)
response
output
View(output)
# Cria Query
query_list <- list(data_ocorrencia="2021-01-01",
nome_cidade= "Rio de Janeiro")
# GET
response <- GET(api,
query=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
View(output)
# Cria Query
query_list <- list(data_ocorrencia[lt]="2021-01-01",
nome_cidade= "Rio de Janeiro")
query_list
# Cria Query
query_list <- list(data_ocorrencia="2021-10-01",
nome_cidade= "Rio de Janeiro")
# GET
response <- GET(api,
query=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
View(output)
output
# Cria Query
query_list <- list(data_ocorrencia="2020-10-01",
nome_cidade= "Rio de Janeiro")
# GET
response <- GET(api,
query=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
View(output)
# Cria Query
query_list <- list(nome_cidade= "Rio de Janeiro")
# GET
response <- GET(api,
query=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
response
# Cria Query
query_list <- list(data_ocorrencia="2019-10-01",
nome_cidade= "Rio de Janeiro")
# GET
response <- GET(api,
query=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
View(output)
# Cria Query
query_list <- list(data_ocorrencia="2019-01-01",
nome_cidade= "Rio de Janeiro")
# GET
response <- GET(api,
query=query_list,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
View(output)
### Visualização com Mapas
Podemos visualizar essa informação com mapas. A função get_googlemap na verdade acessa a API do google maps e faz download do mapa do Rio de Janeiro. Para isso, você precisa liberar o seu acesso à API via google [aqui](https://console.cloud.google.com). Isso fica como um exercício para o futuro.
library(ggmap)
library(RColorBrewer)
ggmap(get_googlemap("rio de janeiro", zoom = 15, maptype = "roadmap", scale=2)) +
geom_point(data = output,
aes(x = longitude_ocorrencia,
y = latitude_ocorrencia),
color="tomato2", alpha=.8, size = 0.3)
library(RColorBrewer)
ggmap(get_googlemap("rio de janeiro", zoom = 11, maptype = "roadmap", scale=2)) +
geom_point(data = output,
aes(x = longitude_ocorrencia,
y = latitude_ocorrencia),
color="tomato2", alpha=.8, size = 0.3)
library(RColorBrewer)
ggmap(get_googlemap("rio de janeiro", zoom = 11, maptype = "roadmap", scale=2)) +
geom_point(data = output,
aes(x = longitude_ocorrencia,
y = latitude_ocorrencia),
color="tomato2", alpha=.8, size = 2)
library(crossfire)
devtools::install_github("voltdatalab/crossfire")
library(crossfire)
library(crossfire)
install.packages("lubridate")
install.packages("lubridate")
library(crossfire)
library(crossfire)
crossfire::fogocruzado_signin(email = "venturat@umd.edu", password = "xxxxxx")
crossfire::fogocruzado_signin(email = "venturat@umd.edu", password = "ptds42420678")
fogocruzado_rj <- crossfire::get_fogocruzado(state= "RJ", security_agent = 1)
fogocruzado_rj
ggmap(get_googlemap("rio de janeiro", zoom = 11, maptype = "roadmap", scale=2)) +
geom_point(data = fogocruzado_rj,
aes(x = longitude_ocorrencia,
y = latitude_ocorrencia),
alpha=.8, size = 0.5, color="darkred")
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-07-01&nome_cidade=Rio de Janeiro"
api <- paste0(base_url, occurences, filter)
print(api)
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
api
api
# url basica de ocorrencias.
base_url <- "https://api.fogocruzado.org.br/api/v1"
occurences <- "/occurrences"
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01&nome_cidade=Rio de Janeiro"
api <- paste0(base_url, occurences, filter)
print(api)
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
response
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01"
api <- paste0(base_url, occurences, filter)
print(api)
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
View(output)
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01&estado_id[]=24"
api <- paste0(base_url, occurences, filter)
print(api)
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
View(output)
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01&estado_id[]=25"
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
View(output)
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01&estado_id[]=19"
api <- paste0(base_url, occurences, filter)
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
View(output)
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01&nome_cidade[]=Rio de Janeiro"
api <- paste0(base_url, occurences, filter)
print(api)
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
response
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01&nome_cidade=Rio de Janeiro"
api <- paste0(base_url, occurences, filter)
print(api)
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01&CidadeID=3594"
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
response
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01&CidadeID[]=3594"
api <- paste0(base_url, occurences, filter)
print(api)
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01&nome_cidade[]=Abreu e Lima"
api <- paste0(base_url, occurences, filter)
print(api)
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
# Passo 1. Crie a Url
base_url <- "https://api.fogocruzado.org.br/api/v1"
cities <- "/cities"
api <- paste0(base_url, cities)
print(api)
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
# Qual o resultado?
response
# Converter para um json
json_fogo_cruzado <- content(response, as="text", encoding = "UTF-8")
json_fogo_cruzado
json_fogo_cruzado
json_fogo_cruzado[1:100]
json_fogo_cruzado[1]
# Limpando Jsons
output <- fromJSON(json_fogo_cruzado) %>%
tibble::as_tibble()
output
View(output)
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01&CidadeID[]=3661"
# url basica de ocorrencias.
base_url <- "https://api.fogocruzado.org.br/api/v1"
occurences <- "/occurrences"
filter= "?data_ocorrencia[gt]=2019-01-01&data_ocorrencia[lt]=2019-05-01&CidadeID[]=3661"
api <- paste0(base_url, occurences, filter)
print(api)
# GET
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
output <- jsonlite::fromJSON(httr::content(response, as="text", encoding = "UTF-8")) %>%
tibble::as_tibble()
output
ggmap(get_googlemap("rio de janeiro", zoom = 11, maptype = "roadmap", scale=2)) +
geom_point(data = output,
aes(x = longitude_ocorrencia,
y = latitude_ocorrencia),
color="tomato2", alpha=.8, size = 2)
library(congressbr)
devtools::install_github("RobertMyles/congressbr")
library(congressbr)
# Ajuda em R
?cham_legislator_list
all <- cham_legislator_list()
glimpse(all)
ano<-c(2002:2018)
proposicoes <- map(ano, ~
cham_plenary_bills(.x) %>%
mutate(ano=.x))
proposicoes <- bind_rows(proposicoes)
proposicoes <- proposicoes %>% distinct()
proposicoes_ano <- proposicoes %>% count(ano)
# Marcar anos pre eleitorais
proposicoes_ano <- proposicoes_ano %>%
mutate(ano_eleitoral=ifelse(ano==2002|ano==2006|
ano==2010|ano==2014|ano==2018, "Ano Eleitoral",
"Ano Não Eleitoral"))
ggplot(proposicoes_ano, aes(y=n, x=ano, fill=ano_eleitoral)) +
geom_col() +
scale_fill_manual(name="", values = c("darkred", "darkblue")) +
theme_minimal() +
xlab("ano") + ylab("Proposições Votadas")
# local if you prefer on your working directory
setwd("/home/venturat/Downloads")
results <- read_csv("simple_example.csv")
results <- as.data.frame(results)
# Identify Maximally similar
rownames(results) <- results$Name
# get the distance matrix using the euclidean space
dmatrix <- dist(results, method = "euclidean")
# hierarchical clustering to find similarity
fit <- hclust(dmatrix, method="ward.D")
# display dendogram
plot(fit)
groups <- cutree(fit, k=10) # cut tree into 5 clusters
# draw dendogram with cut points for groups
rect.hclust(fit, k=10, border="red")
blogdown::serve_site()
blogdown::build_site()
blogdown::serve_site()
# Pacotes para acessar APIs
library(httr)
library(jsonlite)
library(tidyverse)
# Pacotes para acessar APIs
library(httr)
library(jsonlite)
library(tidyverse)
# Solicitar a senha
get_jwt <- httr::POST("https://api.fogocruzado.org.br/api/v1/auth/login",
query = list(email = "venturat@umd.edu", password = "ptds42420678"))
# Pegar a senha
token <- httr::content(get_jwt)$access_token
# token = sua senha de acesso à API. Nao compartilhe por ai.
# Pacotes para acessar APIs
library(httr)
library(jsonlite)
library(tidyverse)
get_jwt <- httr::POST("https://api.fogocruzado.org.br/api/v1/auth/login",
query = list(email = "venturat@umd.edu", password = "ptds42420678"))
httr::POST("https://api.fogocruzado.org.br/api/v1/auth/login",
query = list(email = "venturat@umd.edu", password = "ptds42420678"))
get_jwt <- httr::POST("https://api.fogocruzado.org.br/api/v1/auth/login",
query = list(email = "venturat@umd.edu", password = "ptds42420678"))
# Solicitar a senha
get_jwt <- httr::POST("https://api.fogocruzado.org.br/api/v1/auth/login",
query = list(email = "venturat@umd.edu", password = "xxxxxx"))
# Passo 1. Crie a Url
base_url <- "https://api.fogocruzado.org.br/api/v1"
cities <- "/cities"
api <- paste0(base_url, cities)
print(api)
response <- GET(api,
add_headers('Authorization' = paste("Bearer", token, sep = " ")))
response <- GET(api,
add_headers('Authorization' = paste("Bearer", "os", sep = " ")))
# Solicitar a senha
get_jwt <- httr::POST("https://api.fogocruzado.org.br/api/v1/auth/login",
query = list(email = "venturat@umd.edu", password = "xxxxxx"))
blogdown::serve_site()
blogdown::serve_site()
blogdown::build_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::build_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::build_site()
blogdown::build_site()
blogdown::serve_site()
xaringan::inf_mr()
blogdown::serve_site()
blogdown::serve_site()
blogdown::build_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::build_site()
blogdown::serve_site()
blogdown::serve_site()
